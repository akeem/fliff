(this.webpackJsonpfliff=this.webpackJsonpfliff||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/fliff-logomark.68ab0e72.svg"},46:function(e,t,a){e.exports=a(68)},51:function(e,t,a){},53:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),o=(a(51),a(12)),s=a.n(o),i=a(16),u=a(31),d=a(32),m=a(44),b=a(33),f=a(45),v=(a(27),a(13)),E=a(14),h=(a(53),a(34)),p=a.n(h),w=function(){return r.a.createElement("header",null,r.a.createElement("h3",{className:"header-subtitle"},"Show me the"),r.a.createElement("h1",{className:"header-title"},r.a.createElement("span",null,"FLi"),r.a.createElement("span",null,"FF")),r.a.createElement(v.b,{to:"/list"},r.a.createElement("img",{src:p.a,alt:"Fliff Logomark"})))};function g(){return r.a.createElement("div",null,r.a.createElement(w,null))}var j=a(37),k=a(42),N=a(21),O=a(15);a(61);function _(e){var t=e.address,a=Object(n.useState)(null),c=Object(O.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=11;break}return e.prev=1,e.next=4,window.provider.lookupAddress(t);case 4:(a=e.sent)&&o(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),r.a.createElement("div",null,l||t)}function y(){return window.provider}var x=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y().listAccounts();case 2:(t=e.sent).length&&c(t[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"nav-logo"},r.a.createElement(v.b,{to:"/"},r.a.createElement("span",null,"FLi"),r.a.createElement("span",null,"FF"))),r.a.createElement("div",{className:"address"},r.a.createElement(_,{address:a}))))};a(62);function F(){return r.a.createElement("div",{className:"newdebt"},r.a.createElement(v.b,{className:"newlink",to:"/add"},"+"),r.a.createElement(C,null))}function C(){return r.a.createElement("div",{className:"balancetable"},r.a.createElement("div",{className:"balancetablecell"},r.a.createElement("div",null,"Balance"),r.a.createElement("div",null,"1486.64")),r.a.createElement("div",{className:"balancetablecell"},r.a.createElement("div",null,"Credits"),r.a.createElement("div",{className:"credit"},"1500.01")),r.a.createElement("div",{className:"balancetablecell"},r.a.createElement("div",null,"Debits"),r.a.createElement("div",{className:"debit"},"13.37")))}a(63);function S(){var e=Object(j.a)(['\n  {\n    debtor: debts(where: { _debtor: "','"}) {\n      amount\n      _debtor\n      _debtee\n    }\n    debtee: debts(where: { _debtee: "','"}) {\n      amount\n      _debtor\n      _debtee\n    }\n    settler: settlements(where: { _debtor: "','" }) {\n      amount\n      _debtor\n      _debtee\n    }\n    settlee: settlements(where: { _debtee: "','" }) {\n      amount\n      _debtor\n      _debtee\n    }\n  }\n']);return S=function(){return e},e}var D=function(e){return Object(N.b)(S(),e,e,e,e)};function I(e){var t=e.address,a=Object(k.a)(D(t)),n=a.loading,c=a.error,l=a.data,o=a.subscribeToMore;if(n)return r.a.createElement("div",{className:"content"},r.a.createElement(x,null),r.a.createElement("h1",null,"Loading..."));if(c)return r.a.createElement("div",{className:"content"},r.a.createElement(x,null),r.a.createElement("h1",null,"It borked."));o({document:D(t),updateQuery:function(e,t){t.subscriptionData}});var s=function(e){var t={};e.debtor.forEach((function(e){var a=parseInt(e.amount);t[e._debtee]?t[e._debtee]+=a:t[e._debtee]=a})),e.settler.forEach((function(e){var a=parseInt(e.amount);t[e._debtee]-=a}));var a={};return e.debtee.forEach((function(e){var t=parseInt(e.amount);a[e._debtor]?a[e._debtor]+=t:a[e._debtor]=t})),e.settlee.forEach((function(e){var t=parseInt(e.amount);a[e._debtor]+=t})),Object.keys(t).forEach((function(e){0===t[e]&&delete t[e]})),Object.keys(a).forEach((function(e){0===a[e]&&delete a[e]})),{credits:a,debts:t}}(l);return r.a.createElement("div",{className:"content"},r.a.createElement(x,null),r.a.createElement(W,{balances:s}),r.a.createElement(F,null))}function W(e){var t=e.balances;return console.log(t),r.a.createElement("div",{className:"balances"},Object.keys(t.debts).map((function(e){return r.a.createElement(A,{address:e,value:t.debts[e],kind:"debt",key:e})})))}function A(e){var t=e.address,a=e.value,n=e.kind;return r.a.createElement("div",{className:"balance"},r.a.createElement("div",null,r.a.createElement(_,{address:t})),r.a.createElement("div",null,"USDC"),r.a.createElement("div",{className:n},r.a.createElement("span",null,a)))}a(66);function B(){console.log("We have submitted!")}function L(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(O.a)(l,2),s=o[0],i=o[1],u=a.length&&s.length&&s.match(/[0-9]*\.?[0-9]*/);return r.a.createElement("div",{className:"content"},r.a.createElement(x,null),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",null,"Who?"),r.a.createElement("input",{type:"text",placeholder:"Wallet or ENS address",required:!0,onChange:function(e){e.preventDefault(),c(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",null,"How Much?"),r.a.createElement("input",{type:"text",placeholder:"Amount in USDC",required:!0,pattern:"[0-9]*\\.?[0-9]*",onChange:function(e){e.preventDefault(),i(e.target.value)}})),r.a.createElement("button",{className:"fliff-it ".concat(u?"valid":"invalid"),onClick:B},"Fliff It!"))}var P=a(43),J=a(7),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(b.a)(t).call(this,e))).client=new N.a({uri:"https://api.thegraph.com/subgraphs/id/QmWVv3Y19zTB6JVLQFzcD7BzACMdJVgAyucFUumxFCBVEL"}),a.state={gotProvider:!1,address:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.web3)){e.next=8;break}return window.provider=new P.ethers.providers.Web3Provider(t.currentProvider),e.next=5,y().listAccounts();case 5:a=e.sent,n=a[0],this.setState({gotProvider:!0,address:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.gotProvider,a=e.address;return t&&a?r.a.createElement(J.a,{client:this.client},r.a.createElement(v.a,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/"},r.a.createElement(g,null)),r.a.createElement(E.a,{exact:!0,path:"/list"},r.a.createElement(I,{address:a})),r.a.createElement(E.a,{exact:!0,path:"/add"},r.a.createElement(L,null))))):r.a.createElement("header",null,"trying to get provider...")}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.a372110d.chunk.js.map